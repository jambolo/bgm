(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
var BGMGameScene, TouchInterpreter;

TouchInterpreter = require('./TouchInterpreter');

BGMGameScene = class BGMGameScene extends Phaser.Scene {
  constructor() {
    var i, j, k, l, ref, ref1;
    super();
    Phaser.Scene.call(this, {
      key: 'game',
      active: true
    });
    this.width = 60;
    this.height = 30;
    this.grid = new Array(this.width);
    for (i = k = 0, ref = this.width; (0 <= ref ? k < ref : k > ref); i = 0 <= ref ? ++k : --k) {
      this.grid[i] = new Array(this.height);
      for (j = l = 0, ref1 = this.height; (0 <= ref1 ? l < ref1 : l > ref1); j = 0 <= ref1 ? ++l : --l) {
        this.grid[i][j] = {
          bomb: false,
          sprite: null
        };
      }
    }
    this.touch = new TouchInterpreter();
  }

  preload() {
    this.load.image('blank', 'images/blank.gif');
    return this.load.image('flag', 'images/bombflagged.gif');
  }

  create() {
    var i, j, k, l, ref, ref1;
    for (i = k = 0, ref = this.width; (0 <= ref ? k < ref : k > ref); i = 0 <= ref ? ++k : --k) {
      for (j = l = 0, ref1 = this.height; (0 <= ref1 ? l < ref1 : l > ref1); j = 0 <= ref1 ? ++l : --l) {
        this.grid[i][j].sprite = this.add.image(i * 16, j * 16, 'blank');
        this.grid[i][j].sprite.setOrigin(0, 0);
        this.grid[0][0].sprite.setTexture('flag');
      }
    }
    return this.touch.create(this, this.cameras.main);
  }

  update() {}

  setMagnifyingGlass(x, y, alpha) {
    return this.scene.get('hud').setMagnifyingGlass(x, y, alpha);
  }

  tap(worldX, worldY) {
    var x, y;
    this.scene.get('hud').debugText.text = `Tapped: ${worldX.toFixed(1)} ${worldY.toFixed(1)}`;
    if ((worldX >= 0) && (worldX < (this.width * 16)) && (worldY >= 0) && (worldY < (this.height * 16))) {
      x = Math.floor(worldX / 16);
      y = Math.floor(worldY / 16);
      this.grid[x][y].bomb = !this.grid[x][y].bomb;
      if (this.grid[x][y].bomb) {
        return this.grid[x][y].sprite.setTexture('flag');
      } else {
        return this.grid[x][y].sprite.setTexture('blank');
      }
    }
  }

};

module.exports = BGMGameScene;


},{"./TouchInterpreter":3}],2:[function(require,module,exports){
var BGMHudScene;

BGMHudScene = class BGMHudScene extends Phaser.Scene {
  constructor() {
    super();
    Phaser.Scene.call(this, {
      key: 'hud',
      active: true
    });
  }

  preload() {
    return this.load.image('glass', 'images/glass.gif');
  }

  create() {
    this.debugText = this.add.text(0, 0, 'Tap somewhere!');
    this.glass = this.add.image(50, 50, 'glass');
    this.glass.setOrigin(0.6, 0.3); // roughly the middle of the magnifying glass
    return this.glass.alpha = 0;
  }

  update() {}

  setMagnifyingGlass(x, y, alpha) {
    this.glass.x = x;
    this.glass.y = y;
    return this.glass.alpha = alpha;
  }

};

module.exports = BGMHudScene;


},{}],3:[function(require,module,exports){
var DOUBLE_CLICK_MS, ENGAGE_DRAG_DISTANCE, TouchInterpreter;

ENGAGE_DRAG_DISTANCE = 10;

DOUBLE_CLICK_MS = 400;

TouchInterpreter = class TouchInterpreter {
  constructor() {
    this.tracked = [];
    this.dragX = 0;
    this.dragY = 0;
    this.dragging = false;
    this.doubleClickTime = null;
    this.pinchAnchor = null;
    this.pinchAnchorWorld = null;
  }

  create(scene, camera) {
    this.scene = scene;
    this.camera = camera;
    this.camera.zoom = 1;
    this.scene.input.addPointer(1);
    this.scene.input.on('pointerdown', (pointer) => {
      var clickDelta, now;
      if (this.tracked.length === 0) {
        this.dragging = false;
      }
      // console.log "new pointer #{pointer.id}"
      this.tracked.push({
        id: pointer.id,
        pos: pointer.position.clone()
      });
      if (this.tracked.length === 1) {
        this.setDragPoint();
      }
      if (this.tracked.length === 2) {
        // We just added a second touch spot. Calculate the anchor for pinching now
        this.calcPinchAnchor();
      }
      if (this.tracked.length > 1) {
        this.dragging = true;
        return this.doubleClickTime = null;
      } else if (!this.dragging) {
        now = new Date().getTime();
        if (this.doubleClickTime !== null) {
          // second click
          clickDelta = now - this.doubleClickTime;
          if (clickDelta < DOUBLE_CLICK_MS) {
            this.doubleClickTime = null;
            return;
          }
        }
        // console.log "DOUBLE TAP #{@tracked[0].pos.x} #{@tracked[0].pos.y}"
        return this.doubleClickTime = now;
      }
    });
    this.scene.input.on('pointermove', (pointer) => {
      var currDistance, deltaDistance, dragDistance, dx, dy, i, index, j, newZoom, prevDistance, prevX, prevY, ref;
      prevDistance = 0;
      if (this.tracked.length >= 2) {
        prevDistance = this.calcDistance(this.tracked[0].pos.x, this.tracked[0].pos.y, this.tracked[1].pos.x, this.tracked[1].pos.y);
      }
      if (this.tracked.length === 1) {
        prevX = this.tracked[0].pos.x;
        prevY = this.tracked[0].pos.y;
      }
      index = -1;
      for (i = j = 0, ref = this.tracked.length; (0 <= ref ? j < ref : j > ref); i = 0 <= ref ? ++j : --j) {
        if (this.tracked[i].id === pointer.id) {
          index = i;
          break;
        }
      }
      if (index !== -1) {
        // console.log "updating touch #{id}, tracking #{@tracked.length} touches"
        this.tracked[index].pos = pointer.position.clone();
      }
      if (this.tracked.length === 1) {
        // single touch, consider dragging
        dragDistance = this.calcDistance(this.dragX, this.dragY, this.tracked[0].pos.x, this.tracked[0].pos.y);
        if (this.dragging || (dragDistance > ENGAGE_DRAG_DISTANCE)) {
          this.dragging = true;
          if (dragDistance > 0.5) {
            dx = this.tracked[0].pos.x - this.dragX;
            dy = this.tracked[0].pos.y - this.dragY;
            // console.log "single drag: #{dx}, #{dy}"
            this.camera.scrollX -= dx / this.camera.zoom;
            this.camera.scrollY -= dy / this.camera.zoom;
          }
          // console.log "scroll #{@camera.scrollX} #{@camera.zoom} #{@camera.width}"
          this.setDragPoint();
        }
      } else if (this.tracked.length >= 2) {
        // at least two fingers present, check for pinch/zoom
        currDistance = this.calcDistance(this.tracked[0].pos.x, this.tracked[0].pos.y, this.tracked[1].pos.x, this.tracked[1].pos.y);
        deltaDistance = currDistance - prevDistance;
        if (deltaDistance !== 0) {
          newZoom = this.camera.zoom * (1 + (deltaDistance * 4 / this.camera.width));
          this.adjustZoom(newZoom);
        }
      }
    });
    this.scene.input.on('pointerup', (pointer) => {
      var i, index, j, ref, worldPos;
      if (this.tracked.length === 1) {
        if (!this.dragging) {
          worldPos = this.camera.getWorldPoint(this.tracked[0].pos.x, this.tracked[0].pos.y);
          // console.log "TAP #{worldPos.x} #{worldPos.y} #{@camera.scrollX} #{@camera.scrollY} #{@camera.zoom}"
          this.scene.tap(worldPos.x, worldPos.y);
        }
      }
      index = -1;
      for (i = j = 0, ref = this.tracked.length; (0 <= ref ? j < ref : j > ref); i = 0 <= ref ? ++j : --j) {
        if (this.tracked[i].id === pointer.id) {
          index = i;
          break;
        }
      }
      if (index !== -1) {
        this.tracked.splice(index, 1);
        if (this.tracked.length === 1) {
          this.setDragPoint();
        }
        if (index < 2) {
          // We just forgot one of our pinch touches. Pick a new anchor spot.
          this.calcPinchAnchor();
        }
      }
      this.scene.setMagnifyingGlass(0, 0, 0);
    });
    return this.scene.input.on('wheel', (pointer, gameObjects, deltaX, deltaY, deltaZ) => {
      var newZoom;
      this.calcPinchAnchor(pointer.position.x, pointer.position.y);
      newZoom = this.camera.zoom * (1 - (deltaY / 480));
      this.adjustZoom(newZoom);
      this.scene.setMagnifyingGlass(0, 0, 0);
    });
  }

  adjustZoom(newZoom) {
    var halfH, halfW, offsetX, offsetY;
    if (newZoom < 0.1) {
      newZoom = 0.1;
    }
    if (newZoom > 5) {
      newZoom = 5;
    }
    this.camera.zoom = newZoom;
    halfW = this.camera.width / 2;
    halfH = this.camera.height / 2;
    offsetX = (this.pinchAnchor.x - halfW) / newZoom;
    offsetY = (this.pinchAnchor.y - halfH) / newZoom;
    this.camera.scrollX = this.pinchAnchorWorld.x - halfW - offsetX;
    this.camera.scrollY = this.pinchAnchorWorld.y - halfH - offsetY;
  }

  setDragPoint() {
    this.dragX = this.tracked[0].pos.x;
    return this.dragY = this.tracked[0].pos.y;
  }

  calcPinchAnchor(pinchX = null, pinchY = null) {
    if ((pinchX === null) && (pinchY === null)) {
      if (this.tracked.length < 2) {
        return;
      }
      pinchX = Math.floor((this.tracked[0].pos.x + this.tracked[1].pos.x) / 2);
      pinchY = Math.floor((this.tracked[0].pos.y + this.tracked[1].pos.y) / 2);
    }
    this.pinchAnchor = {
      x: pinchX,
      y: pinchY
    };
    this.pinchAnchorWorld = this.camera.getWorldPoint(pinchX, pinchY);
    return this.scene.setMagnifyingGlass(this.pinchAnchor.x, this.pinchAnchor.y, 1);
  }

  calcDistance(x1, y1, x2, y2) {
    var dx, dy;
    dx = x2 - x1;
    dy = y2 - y1;
    return Math.sqrt(dx * dx + dy * dy);
  }

};

module.exports = TouchInterpreter;


},{}],4:[function(require,module,exports){
var BGMGameScene, BGMHudScene, init;

BGMGameScene = require('./BGMGameScene');

BGMHudScene = require('./BGMHudScene');

init = function() {
  var config, game;
  console.log("Bad Guy Minesweeper: init()");
  config = {
    type: Phaser.AUTO,
    width: document.documentElement.clientWidth,
    height: document.documentElement.clientHeight,
    backgroundColor: '#2d2d2d',
    parent: 'screen',
    input: {
      activePointers: 2
    },
    scene: [BGMGameScene, BGMHudScene]
  };
  return game = new Phaser.Game(config);
};

window.addEventListener('load', function(e) {
  return init();
}, false);


},{"./BGMGameScene":1,"./BGMHudScene":2}]},{},[4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvQkdNR2FtZVNjZW5lLmNvZmZlZSIsInNyYy9CR01IdWRTY2VuZS5jb2ZmZWUiLCJzcmMvVG91Y2hJbnRlcnByZXRlci5jb2ZmZWUiLCJzcmMvbWFpbi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxJQUFBLFlBQUEsRUFBQTs7QUFBQSxnQkFBQSxHQUFtQixPQUFBLENBQVEsb0JBQVI7O0FBRWIsZUFBTixNQUFBLGFBQUEsUUFBMkIsTUFBTSxDQUFDLE1BQWxDO0VBQ0UsV0FBYSxDQUFBLENBQUE7QUFDZixRQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUE7U0FBSSxDQUFBO0lBQ0EsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFiLENBQWtCLElBQWxCLEVBQXdCO01BQUUsR0FBQSxFQUFLLE1BQVA7TUFBZSxNQUFBLEVBQVE7SUFBdkIsQ0FBeEI7SUFFQSxJQUFDLENBQUEsS0FBRCxHQUFTO0lBQ1QsSUFBQyxDQUFBLE1BQUQsR0FBVTtJQUVWLElBQUMsQ0FBQSxJQUFELEdBQVEsSUFBSSxLQUFKLENBQVUsSUFBQyxDQUFBLEtBQVg7SUFDUixLQUFTLHFGQUFUO01BQ0UsSUFBQyxDQUFBLElBQUksQ0FBQyxDQUFELENBQUwsR0FBVyxJQUFJLEtBQUosQ0FBVSxJQUFDLENBQUEsTUFBWDtNQUNYLEtBQVMsMkZBQVQ7UUFDRSxJQUFDLENBQUEsSUFBSSxDQUFDLENBQUQsQ0FBRyxDQUFDLENBQUQsQ0FBUixHQUNFO1VBQUEsSUFBQSxFQUFNLEtBQU47VUFDQSxNQUFBLEVBQVE7UUFEUjtNQUZKO0lBRkY7SUFPQSxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUksZ0JBQUosQ0FBQTtFQWZFOztFQWlCYixPQUFTLENBQUEsQ0FBQTtJQUNQLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FBTixDQUFZLE9BQVosRUFBcUIs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QSxHQUFHLEVBQXJCO0VBSEs7O0FBcEpoQjs7QUF5SkEsTUFBTSxDQUFDLE9BQVAsR0FBaUI7Ozs7QUM1SmpCLElBQUEsWUFBQSxFQUFBLFdBQUEsRUFBQTs7QUFBQSxZQUFBLEdBQWUsT0FBQSxDQUFRLGdCQUFSOztBQUNmLFdBQUEsR0FBYyxPQUFBLENBQVEsZUFBUjs7QUFFZCxJQUFBLEdBQU8sUUFBQSxDQUFBLENBQUE7QUFDUCxNQUFBLE1BQUEsRUFBQTtFQUFFLE9BQU8sQ0FBQyxHQUFSLENBQVksNkJBQVo7RUFFQSxNQUFBLEdBQ0U7SUFBQSxJQUFBLEVBQU0sTUFBTSxDQUFDLElBQWI7SUFDQSxLQUFBLEVBQU8sUUFBUSxDQUFDLGVBQWUsQ0FBQyxXQURoQztJQUVBLE1BQUEsRUFBUSxRQUFRLENBQUMsZUFBZSxDQUFDLFlBRmpDO0lBR0EsZUFBQSxFQUFpQixTQUhqQjtJQUlBLE1BQUEsRUFBUSxRQUpSO0lBS0EsS0FBQSxFQUNFO01BQUEsY0FBQSxFQUFnQjtJQUFoQixDQU5GO0lBT0EsS0FBQSxFQUFPLENBQ0wsWUFESyxFQUVMLFdBRks7RUFQUDtTQVlGLElBQUEsR0FBTyxJQUFJLE1BQU0sQ0FBQyxJQUFYLENBQWdCLE1BQWhCO0FBaEJGOztBQW1CUCxNQUFNLENBQUMsZ0JBQVAsQ0FBd0IsTUFBeEIsRUFBZ0MsUUFBQSxDQUFDLENBQUQsQ0FBQTtTQUM1QixJQUFBLENBQUE7QUFENEIsQ0FBaEMsRUFFRSxLQUZGIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiVG91Y2hJbnRlcnByZXRlciA9IHJlcXVpcmUgJy4vVG91Y2hJbnRlcnByZXRlcidcclxuXHJcbmNsYXNzIEJHTUdhbWVTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZVxyXG4gIGNvbnN0cnVjdG9yOiAtPlxyXG4gICAgc3VwZXIoKVxyXG4gICAgUGhhc2VyLlNjZW5lLmNhbGwodGhpcywgeyBrZXk6ICdnYW1lJywgYWN0aXZlOiB0cnVlIH0pO1xyXG5cclxuICAgIEB3aWR0aCA9IDYwXHJcbiAgICBAaGVpZ2h0ID0gMzBcclxuXHJcbiAgICBAZ3JpZCA9IG5ldyBBcnJheShAd2lkdGgpXHJcbiAgICBmb3IgaSBpbiBbMC4uLkB3aWR0aF1cclxuICAgICAgQGdyaWRbaV0gPSBuZXcgQXJyYXkoQGhlaWdodClcclxuICAgICAgZm9yIGogaW4gWzAuLi5AaGVpZ2h0XVxyXG4gICAgICAgIEBncmlkW2ldW2pdID1cclxuICAgICAgICAgIGJvbWI6IGZhbHNlXHJcbiAgICAgICAgICBzcHJpdGU6IG51bGxcclxuXHJcbiAgICBAdG91Y2ggPSBuZXcgVG91Y2hJbnRlcnByZXRlclxyXG5cclxuICBwcmVsb2FkOiAtPlxyXG4gICAgQGxvYWQuaW1hZ2UoJ2JsYW5rJywgJ2ltYWdlcy9ibGFuay5naWYnKVxyXG4gICAgQGxvYWQuaW1hZ2UoJ2ZsYWcnLCAnaW1hZ2VzL2JvbWJmbGFnZ2VkLmdpZicpXHJcblxyXG4gIGNyZWF0ZTogLT5cclxuICAgIGZvciBpIGluIFswLi4uQHdpZHRoXVxyXG4gICAgICBmb3IgaiBpbiBbMC4uLkBoZWlnaHRdXHJcbiAgICAgICAgQGdyaWRbaV1bal0uc3ByaXRlID0gQGFkZC5pbWFnZShpICogMTYsIGogKiAxNiwgJ2JsYW5rJylcclxuICAgICAgICBAZ3JpZFtpXVtqXS5zcHJpdGUuc2V0T3JpZ2luKDAsIDApXHJcblxyXG4gICAgICAgIEBncmlkWzBdWzBdLnNwcml0ZS5zZXRUZXh0dXJlKCdmbGFnJylcclxuXHJcbiAgICBAdG91Y2guY3JlYXRlKHRoaXMsIEBjYW1lcmFzLm1haW4pXHJcblxyXG4gIHVwZGF0ZTogLT5cclxuXHJcbiAgc2V0TWFnbmlmeWluZ0dsYXNzOiAoeCwgeSwgYWxwaGEpIC0+XHJcbiAgICBAc2NlbmUuZ2V0KCdodWQnKS5zZXRNYWduaWZ5aW5nR2xhc3MoeCwgeSwgYWxwaGEpXHJcblxyXG4gIHRhcDogKHdvcmxkWCwgd29ybGRZKSAtPlxyXG4gICAgQHNjZW5lLmdldCgnaHVkJykuZGVidWdUZXh0LnRleHQgPSBcIlRhcHBlZDogI3t3b3JsZFgudG9GaXhlZCgxKX0gI3t3b3JsZFkudG9GaXhlZCgxKX1cIlxyXG5cclxuICAgIGlmICh3b3JsZFggPj0gMCkgYW5kICh3b3JsZFggPCAoQHdpZHRoICogMTYpKSBhbmQgKHdvcmxkWSA+PSAwKSBhbmQgKHdvcmxkWSA8IChAaGVpZ2h0ICogMTYpKVxyXG4gICAgICB4ID0gTWF0aC5mbG9vcih3b3JsZFggLyAxNilcclxuICAgICAgeSA9IE1hdGguZmxvb3Iod29ybGRZIC8gMTYpXHJcbiAgICAgIEBncmlkW3hdW3ldLmJvbWIgPSAhQGdyaWRbeF1beV0uYm9tYlxyXG4gICAgICBpZiBAZ3JpZFt4XVt5XS5ib21iXHJcbiAgICAgICAgQGdyaWRbeF1beV0uc3ByaXRlLnNldFRleHR1cmUoJ2ZsYWcnKVxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgQGdyaWRbeF1beV0uc3ByaXRlLnNldFRleHR1cmUoJ2JsYW5rJylcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQkdNR2FtZVNjZW5lXHJcbiIsImNsYXNzIEJHTUh1ZFNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lXHJcbiAgY29uc3RydWN0b3I6IC0+XHJcbiAgICBzdXBlcigpXHJcbiAgICBQaGFzZXIuU2NlbmUuY2FsbCh0aGlzLCB7IGtleTogJ2h1ZCcsIGFjdGl2ZTogdHJ1ZSB9KTtcclxuXHJcbiAgcHJlbG9hZDogLT5cclxuICAgIEBsb2FkLmltYWdlKCdnbGFzcycsICdpbWFnZXMvZ2xhc3MuZ2lmJylcclxuXHJcbiAgY3JlYXRlOiAtPlxyXG4gICAgQGRlYnVnVGV4dCA9IEBhZGQudGV4dCgwLCAwLCAnVGFwIHNvbWV3aGVyZSEnKVxyXG4gICAgQGdsYXNzID0gQGFkZC5pbWFnZSg1MCwgNTAsICdnbGFzcycpXHJcbiAgICBAZ2xhc3Muc2V0T3JpZ2luKDAuNiwgMC4zKSAjIHJvdWdobHkgdGhlIG1pZGRsZSBvZiB0aGUgbWFnbmlmeWluZyBnbGFzc1xyXG4gICAgQGdsYXNzLmFscGhhID0gMFxyXG5cclxuICB1cGRhdGU6IC0+XHJcblxyXG4gIHNldE1hZ25pZnlpbmdHbGFzczogKHgsIHksIGFscGhhKSAtPlxyXG4gICAgQGdsYXNzLnggPSB4XHJcbiAgICBAZ2xhc3MueSA9IHlcclxuICAgIEBnbGFzcy5hbHBoYSA9IGFscGhhXHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCR01IdWRTY2VuZVxyXG4iLCJFTkdBR0VfRFJBR19ESVNUQU5DRSA9IDEwXHJcbkRPVUJMRV9DTElDS19NUyA9IDQwMFxyXG5cclxuY2xhc3MgVG91Y2hJbnRlcnByZXRlclxyXG4gIGNvbnN0cnVjdG9yOiAtPlxyXG4gICAgQHRyYWNrZWQgPSBbXVxyXG4gICAgQGRyYWdYID0gMFxyXG4gICAgQGRyYWdZID0gMFxyXG4gICAgQGRyYWdnaW5nID0gZmFsc2VcclxuICAgIEBkb3VibGVDbGlja1RpbWUgPSBudWxsXHJcbiAgICBAcGluY2hBbmNob3IgPSBudWxsXHJcbiAgICBAcGluY2hBbmNob3JXb3JsZCA9IG51bGxcclxuXHJcbiAgY3JlYXRlOiAoQHNjZW5lLCBAY2FtZXJhKSAtPlxyXG5cclxuICAgIEBjYW1lcmEuem9vbSA9IDFcclxuXHJcbiAgICBAc2NlbmUuaW5wdXQuYWRkUG9pbnRlcigxKVxyXG5cclxuICAgIEBzY2VuZS5pbnB1dC5vbiAncG9pbnRlcmRvd24nLCAocG9pbnRlcikgPT5cclxuICAgICAgaWYgQHRyYWNrZWQubGVuZ3RoID09IDBcclxuICAgICAgICBAZHJhZ2dpbmcgPSBmYWxzZVxyXG5cclxuICAgICAgIyBjb25zb2xlLmxvZyBcIm5ldyBwb2ludGVyICN7cG9pbnRlci5pZH1cIlxyXG4gICAgICBAdHJhY2tlZC5wdXNoIHtcclxuICAgICAgICBpZDogcG9pbnRlci5pZFxyXG4gICAgICAgIHBvczogcG9pbnRlci5wb3NpdGlvbi5jbG9uZSgpXHJcbiAgICAgIH1cclxuICAgICAgaWYgQHRyYWNrZWQubGVuZ3RoID09IDFcclxuICAgICAgICBAc2V0RHJhZ1BvaW50KClcclxuICAgICAgaWYgQHRyYWNrZWQubGVuZ3RoID09IDJcclxuICAgICAgICAjIFdlIGp1c3QgYWRkZWQgYSBzZWNvbmQgdG91Y2ggc3BvdC4gQ2FsY3VsYXRlIHRoZSBhbmNob3IgZm9yIHBpbmNoaW5nIG5vd1xyXG4gICAgICAgIEBjYWxjUGluY2hBbmNob3IoKVxyXG5cclxuICAgICAgaWYgQHRyYWNrZWQubGVuZ3RoID4gMVxyXG4gICAgICAgIEBkcmFnZ2luZyA9IHRydWVcclxuICAgICAgICBAZG91YmxlQ2xpY2tUaW1lID0gbnVsbFxyXG4gICAgICBlbHNlIGlmIG5vdCBAZHJhZ2dpbmdcclxuICAgICAgICBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKVxyXG4gICAgICAgIGlmIEBkb3VibGVDbGlja1RpbWUgIT0gbnVsbFxyXG4gICAgICAgICAgIyBzZWNvbmQgY2xpY2tcclxuICAgICAgICAgIGNsaWNrRGVsdGEgPSBub3cgLSBAZG91YmxlQ2xpY2tUaW1lXHJcbiAgICAgICAgICBpZiBjbGlja0RlbHRhIDwgRE9VQkxFX0NMSUNLX01TXHJcbiAgICAgICAgICAgIEBkb3VibGVDbGlja1RpbWUgPSBudWxsXHJcbiAgICAgICAgICAgICMgY29uc29sZS5sb2cgXCJET1VCTEUgVEFQICN7QHRyYWNrZWRbMF0ucG9zLnh9ICN7QHRyYWNrZWRbMF0ucG9zLnl9XCJcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgQGRvdWJsZUNsaWNrVGltZSA9IG5vd1xyXG5cclxuICAgIEBzY2VuZS5pbnB1dC5vbiAncG9pbnRlcm1vdmUnLCAocG9pbnRlcikgPT5cclxuICAgICAgcHJldkRpc3RhbmNlID0gMFxyXG4gICAgICBpZiBAdHJhY2tlZC5sZW5ndGggPj0gMlxyXG4gICAgICAgIHByZXZEaXN0YW5jZSA9IEBjYWxjRGlzdGFuY2UoQHRyYWNrZWRbMF0ucG9zLngsIEB0cmFja2VkWzBdLnBvcy55LCBAdHJhY2tlZFsxXS5wb3MueCwgQHRyYWNrZWRbMV0ucG9zLnkpXHJcbiAgICAgIGlmIEB0cmFja2VkLmxlbmd0aCA9PSAxXHJcbiAgICAgICAgcHJldlggPSBAdHJhY2tlZFswXS5wb3MueFxyXG4gICAgICAgIHByZXZZID0gQHRyYWNrZWRbMF0ucG9zLnlcclxuXHJcbiAgICAgIGluZGV4ID0gLTFcclxuICAgICAgZm9yIGkgaW4gWzAuLi5AdHJhY2tlZC5sZW5ndGhdXHJcbiAgICAgICAgaWYgQHRyYWNrZWRbaV0uaWQgPT0gcG9pbnRlci5pZFxyXG4gICAgICAgICAgaW5kZXggPSBpXHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICBpZiBpbmRleCAhPSAtMVxyXG4gICAgICAgICMgY29uc29sZS5sb2cgXCJ1cGRhdGluZyB0b3VjaCAje2lkfSwgdHJhY2tpbmcgI3tAdHJhY2tlZC5sZW5ndGh9IHRvdWNoZXNcIlxyXG4gICAgICAgIEB0cmFja2VkW2luZGV4XS5wb3MgPSBwb2ludGVyLnBvc2l0aW9uLmNsb25lKClcclxuXHJcbiAgICAgIGlmIEB0cmFja2VkLmxlbmd0aCA9PSAxXHJcbiAgICAgICAgIyBzaW5nbGUgdG91Y2gsIGNvbnNpZGVyIGRyYWdnaW5nXHJcbiAgICAgICAgZHJhZ0Rpc3RhbmNlID0gQGNhbGNEaXN0YW5jZSBAZHJhZ1gsIEBkcmFnWSwgQHRyYWNrZWRbMF0ucG9zLngsIEB0cmFja2VkWzBdLnBvcy55XHJcbiAgICAgICAgaWYgQGRyYWdnaW5nIG9yIChkcmFnRGlzdGFuY2UgPiBFTkdBR0VfRFJBR19ESVNUQU5DRSlcclxuICAgICAgICAgIEBkcmFnZ2luZyA9IHRydWVcclxuICAgICAgICAgIGlmIGRyYWdEaXN0YW5jZSA+IDAuNVxyXG4gICAgICAgICAgICBkeCA9IEB0cmFja2VkWzBdLnBvcy54IC0gQGRyYWdYXHJcbiAgICAgICAgICAgIGR5ID0gQHRyYWNrZWRbMF0ucG9zLnkgLSBAZHJhZ1lcclxuICAgICAgICAgICAgIyBjb25zb2xlLmxvZyBcInNpbmdsZSBkcmFnOiAje2R4fSwgI3tkeX1cIlxyXG4gICAgICAgICAgICBAY2FtZXJhLnNjcm9sbFggLT0gZHggLyBAY2FtZXJhLnpvb21cclxuICAgICAgICAgICAgQGNhbWVyYS5zY3JvbGxZIC09IGR5IC8gQGNhbWVyYS56b29tXHJcblxyXG4gICAgICAgICAgICAjIGNvbnNvbGUubG9nIFwic2Nyb2xsICN7QGNhbWVyYS5zY3JvbGxYfSAje0BjYW1lcmEuem9vbX0gI3tAY2FtZXJhLndpZHRofVwiXHJcbiAgICAgICAgICBAc2V0RHJhZ1BvaW50KClcclxuXHJcbiAgICAgIGVsc2UgaWYgQHRyYWNrZWQubGVuZ3RoID49IDJcclxuICAgICAgICAjIGF0IGxlYXN0IHR3byBmaW5nZXJzIHByZXNlbnQsIGNoZWNrIGZvciBwaW5jaC96b29tXHJcbiAgICAgICAgY3VyckRpc3RhbmNlID0gQGNhbGNEaXN0YW5jZShAdHJhY2tlZFswXS5wb3MueCwgQHRyYWNrZWRbMF0ucG9zLnksIEB0cmFja2VkWzFdLnBvcy54LCBAdHJhY2tlZFsxXS5wb3MueSlcclxuICAgICAgICBkZWx0YURpc3RhbmNlID0gY3VyckRpc3RhbmNlIC0gcHJldkRpc3RhbmNlXHJcbiAgICAgICAgaWYgZGVsdGFEaXN0YW5jZSAhPSAwXHJcbiAgICAgICAgICBuZXdab29tID0gQGNhbWVyYS56b29tICogKDEgKyAoZGVsdGFEaXN0YW5jZSAqIDQgLyBAY2FtZXJhLndpZHRoKSlcclxuICAgICAgICAgIEBhZGp1c3Rab29tKG5ld1pvb20pXHJcbiAgICAgIHJldHVyblxyXG5cclxuICAgIEBzY2VuZS5pbnB1dC5vbiAncG9pbnRlcnVwJywgKHBvaW50ZXIpID0+XHJcbiAgICAgIGlmIEB0cmFja2VkLmxlbmd0aCA9PSAxXHJcbiAgICAgICAgaWYgbm90IEBkcmFnZ2luZ1xyXG4gICAgICAgICAgd29ybGRQb3MgPSBAY2FtZXJhLmdldFdvcmxkUG9pbnQoQHRyYWNrZWRbMF0ucG9zLngsIEB0cmFja2VkWzBdLnBvcy55KVxyXG4gICAgICAgICAgIyBjb25zb2xlLmxvZyBcIlRBUCAje3dvcmxkUG9zLnh9ICN7d29ybGRQb3MueX0gI3tAY2FtZXJhLnNjcm9sbFh9ICN7QGNhbWVyYS5zY3JvbGxZfSAje0BjYW1lcmEuem9vbX1cIlxyXG4gICAgICAgICAgQHNjZW5lLnRhcCh3b3JsZFBvcy54LCB3b3JsZFBvcy55KVxyXG5cclxuICAgICAgaW5kZXggPSAtMVxyXG4gICAgICBmb3IgaSBpbiBbMC4uLkB0cmFja2VkLmxlbmd0aF1cclxuICAgICAgICBpZiBAdHJhY2tlZFtpXS5pZCA9PSBwb2ludGVyLmlkXHJcbiAgICAgICAgICBpbmRleCA9IGlcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgIGlmIGluZGV4ICE9IC0xXHJcbiAgICAgICAgQHRyYWNrZWQuc3BsaWNlKGluZGV4LCAxKVxyXG4gICAgICAgIGlmIEB0cmFja2VkLmxlbmd0aCA9PSAxXHJcbiAgICAgICAgICBAc2V0RHJhZ1BvaW50KClcclxuXHJcbiAgICAgICAgaWYgaW5kZXggPCAyXHJcbiAgICAgICAgICAjIFdlIGp1c3QgZm9yZ290IG9uZSBvZiBvdXIgcGluY2ggdG91Y2hlcy4gUGljayBhIG5ldyBhbmNob3Igc3BvdC5cclxuICAgICAgICAgIEBjYWxjUGluY2hBbmNob3IoKVxyXG5cclxuICAgICAgQHNjZW5lLnNldE1hZ25pZnlpbmdHbGFzcygwLCAwLCAwKVxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICBAc2NlbmUuaW5wdXQub24gJ3doZWVsJywgKHBvaW50ZXIsIGdhbWVPYmplY3RzLCBkZWx0YVgsIGRlbHRhWSwgZGVsdGFaKSA9PlxyXG4gICAgICBAY2FsY1BpbmNoQW5jaG9yKHBvaW50ZXIucG9zaXRpb24ueCwgcG9pbnRlci5wb3NpdGlvbi55KVxyXG4gICAgICBuZXdab29tID0gQGNhbWVyYS56b29tICogKDEgLSAoZGVsdGFZIC8gNDgwKSlcclxuICAgICAgQGFkanVzdFpvb20obmV3Wm9vbSlcclxuICAgICAgQHNjZW5lLnNldE1hZ25pZnlpbmdHbGFzcygwLCAwLCAwKVxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgYWRqdXN0Wm9vbTogKG5ld1pvb20pIC0+XHJcbiAgICBpZiBuZXdab29tIDwgMC4xXHJcbiAgICAgIG5ld1pvb20gPSAwLjFcclxuICAgIGlmIG5ld1pvb20gPiA1XHJcbiAgICAgIG5ld1pvb20gPSA1XHJcbiAgICBAY2FtZXJhLnpvb20gPSBuZXdab29tXHJcblxyXG4gICAgaGFsZlcgPSAoQGNhbWVyYS53aWR0aCAvIDIpXHJcbiAgICBoYWxmSCA9IChAY2FtZXJhLmhlaWdodCAvIDIpXHJcbiAgICBvZmZzZXRYID0gKEBwaW5jaEFuY2hvci54IC0gaGFsZlcpIC8gbmV3Wm9vbVxyXG4gICAgb2Zmc2V0WSA9IChAcGluY2hBbmNob3IueSAtIGhhbGZIKSAvIG5ld1pvb21cclxuICAgIEBjYW1lcmEuc2Nyb2xsWCA9IEBwaW5jaEFuY2hvcldvcmxkLnggLSBoYWxmVyAtIG9mZnNldFhcclxuICAgIEBjYW1lcmEuc2Nyb2xsWSA9IEBwaW5jaEFuY2hvcldvcmxkLnkgLSBoYWxmSCAtIG9mZnNldFlcclxuICAgIHJldHVyblxyXG5cclxuICBzZXREcmFnUG9pbnQ6IC0+XHJcbiAgICBAZHJhZ1ggPSBAdHJhY2tlZFswXS5wb3MueFxyXG4gICAgQGRyYWdZID0gQHRyYWNrZWRbMF0ucG9zLnlcclxuXHJcbiAgY2FsY1BpbmNoQW5jaG9yOiAocGluY2hYID0gbnVsbCwgcGluY2hZID0gbnVsbCkgLT5cclxuICAgIGlmIChwaW5jaFggPT0gbnVsbCkgYW5kIChwaW5jaFkgPT0gbnVsbClcclxuICAgICAgaWYgQHRyYWNrZWQubGVuZ3RoIDwgMlxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICBwaW5jaFggPSBNYXRoLmZsb29yKChAdHJhY2tlZFswXS5wb3MueCArIEB0cmFja2VkWzFdLnBvcy54KSAvIDIpXHJcbiAgICAgIHBpbmNoWSA9IE1hdGguZmxvb3IoKEB0cmFja2VkWzBdLnBvcy55ICsgQHRyYWNrZWRbMV0ucG9zLnkpIC8gMilcclxuXHJcbiAgICBAcGluY2hBbmNob3IgPSB7eDogcGluY2hYLCB5OiBwaW5jaFkgfVxyXG4gICAgQHBpbmNoQW5jaG9yV29ybGQgPSBAY2FtZXJhLmdldFdvcmxkUG9pbnQocGluY2hYLCBwaW5jaFkpXHJcblxyXG4gICAgQHNjZW5lLnNldE1hZ25pZnlpbmdHbGFzcyhAcGluY2hBbmNob3IueCwgQHBpbmNoQW5jaG9yLnksIDEpXHJcblxyXG4gIGNhbGNEaXN0YW5jZTogKHgxLCB5MSwgeDIsIHkyKSAtPlxyXG4gICAgZHggPSB4MiAtIHgxXHJcbiAgICBkeSA9IHkyIC0geTFcclxuICAgIHJldHVybiBNYXRoLnNxcnQoZHgqZHggKyBkeSpkeSlcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVG91Y2hJbnRlcnByZXRlclxyXG4iLCJCR01HYW1lU2NlbmUgPSByZXF1aXJlICcuL0JHTUdhbWVTY2VuZSdcclxuQkdNSHVkU2NlbmUgPSByZXF1aXJlICcuL0JHTUh1ZFNjZW5lJ1xyXG5cclxuaW5pdCA9IC0+XHJcbiAgY29uc29sZS5sb2cgXCJCYWQgR3V5IE1pbmVzd2VlcGVyOiBpbml0KClcIlxyXG5cclxuICBjb25maWcgPVxyXG4gICAgdHlwZTogUGhhc2VyLkFVVE9cclxuICAgIHdpZHRoOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGhcclxuICAgIGhlaWdodDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFxyXG4gICAgYmFja2dyb3VuZENvbG9yOiAnIzJkMmQyZCdcclxuICAgIHBhcmVudDogJ3NjcmVlbidcclxuICAgIGlucHV0OlxyXG4gICAgICBhY3RpdmVQb2ludGVyczogMlxyXG4gICAgc2NlbmU6IFtcclxuICAgICAgQkdNR2FtZVNjZW5lXHJcbiAgICAgIEJHTUh1ZFNjZW5lXHJcbiAgICBdXHJcblxyXG4gIGdhbWUgPSBuZXcgUGhhc2VyLkdhbWUoY29uZmlnKVxyXG5cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKGUpIC0+XHJcbiAgICBpbml0KClcclxuLCBmYWxzZSlcclxuIl19
